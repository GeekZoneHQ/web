{% extends "base.html" %}

{% block content %}
      
      <h1>Confirm your Geek.Zone membership payment</h1>
      
      <p>Your sand membership will cost £{{total}} a year</p>
      
      {% if donation %}
      <p>This is made up of a £1 Sand membership charge and a £{{donation}} donation</p>
      {% else %}
      <p>This is made up of a £1 Sand membership charge with no donation</p>
      {% endif %}
      
      <button id="checkout-button">Setup your Direct Debit</button>
      
      <script src="https://js.stripe.com/v3/"></script>
      <script type="text/javascript">
          const stripe = Stripe('{{stripe_public_key}}');
          
          const checkoutButton = document.getElementById('checkout-button');
          
          checkoutButton.addEventListener('click', () => {
              stripe.redirectToCheckout({
                  sessionId: '{{stripe_session_id}}'
              }).then(console.log);
          });
      </script>
      
{% endblock %}
