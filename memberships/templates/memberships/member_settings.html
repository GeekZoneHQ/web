{% extends "base.html" %}
{% load widget_tweaks %}

{% block content %}
  <h2 class="header mb-3">Member Settings</h2>
  
  <form action="{% url 'memberships_settings' %}" method="POST">
    {% csrf_token %}

    <div class="ml-4 text-sm">
      {% for field in form %}
      <div class="mb-2 last:mb-3">
        {{ field.errors }}

        <div class="flex items-center">
          {{ field | add_label_class:"mr-2"}}

          {{ field | add_class:"border-input bg-gray-100 text-gray-800" | add_required_class:"input-required" | add_error_class:"border-red-500" }}

          {% if field.field.required %} <span class="ml-1 text-red-500">*</span> {% endif %}

          {% if field.help_text %}
          <div class="ml-2 pointer-events-none">
            <div class="info-icon text-2xl sm:text-lg -my-1.5 pointer-events-auto cursor-pointer">&#9432;</div>
            <div class="fixed sm:relative inset-0 flex justify-center items-center bg-black sm:bg-transparent bg-opacity-20 opacity-0">
              <div class="static sm:absolute sm:bottom-5 sm:-left-12 m-3 sm:m-0 py-3 px-4 sm:py-2 sm:px-3 max-w-xs md:max-w-sm w-max bg-white sm:bg-gray-600 dark:bg-gray-600 sm:text-gray-200 dark:text-gray-200 sm:text-xs rounded shadow">
                {{ field.help_text | safe }}
                <svg class="hidden sm:block absolute -bottom-2.5 left-12 h-3" viewBox="0 0 2 2" xml:space="preserve">
                  <polygon class="fill-current text-gray-600" points="0,0 1,1 2,0"/>
                </svg>
              </div>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  
    <input class="btn mb-3" type="submit" value="Save">
  </form>

  <script>
    for (let e of document.getElementsByClassName("info-icon")) {
      e.addEventListener("mouseover", () => showHelpText(e.nextElementSibling.classList));
      e.addEventListener("mouseout", () => hideHelpText(e.nextElementSibling.classList));
    }
  </script>
{% endblock %}